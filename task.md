# Учебный проект: Агрегация рыночных данных  
## Часть 1 — Получение исторических данных

### Задание

Вам необходимо реализовать первую часть учебного проекта по агрегации рыночных данных — получение и сохранение исторических данных о российских ценных бумагах.

---

## 1. Файл с тикерами

1. Создайте текстовый файл `tickers.txt`.  
2. Поместите туда **4–5 тикеров** российских компаний (по одному в строке). Примеры тикеров:
   - SBER
   - GMKN
   - LKOH
   - MOEX
   - MGNT  

Можно выбрать любые компании, желательно из разных отраслей.

---

## 2. Асинхронная функция-генератор

Реализуйте `async`-функцию-генератор, которая построчно читает файл `tickers.txt` и выдаёт тикеры.

---

## 3. Получение данных через ISS API Московской биржи

Для каждого тикера вам необходимо получить:

### 3.1. Дивиденды
По адресу:
```
http://iss.moex.com/iss/securities/{TICKER}/dividends.json
```

Нужно извлечь:
- дату выплаты,
- сумму дивиденда на 1 акцию,
- валюту.

---

### 3.2. Историю цен закрытия
По адресу:
```
http://iss.moex.com/iss/history/engines/stock/markets/shares/boards/TQBR/securities/{TICKER}.json
```

Извлечь:
- дату торгов (`TRADEDATE`),
- цену закрытия (`CLOSE`).

⚠ Ограничение API: **максимум 100 записей за один ответ**.  
Нужно реализовать получение **всей истории**, используя пагинацию или разбиение диапазонов дат.

---

### 3.3. Границы доступной истории

Запрос:
```
http://iss.moex.com/iss/history/engines/stock/markets/shares/boards/TQBR/securities/{TICKER}/dates.json
```

Используйте для определения диапазона дат.

---

## 4. Сохранение в CSV

Для каждого тикера создать два файла:

1. **`TICKER_prices.csv`**  
   Столбцы: `date`, `close`

2. **`TICKER_dividends.csv`**  
   Столбцы: `date`, `value`, `currency`

---

## 5. Требования к реализации

Ваш финальный код должен:

- использовать **асинхронный HTTP-клиент** (`aiohttp`);
- использовать асинхронную функцию-генератор для чтения тикеров;
- корректно обрабатывать пагинацию истории котировок;
- записывать данные в CSV (возможно через `ThreadPoolExecutor`, чтобы не блокировать event loop).

---

## 6. Что сдавать

- Python-скрипт с реализацией всей логики;
- файл `tickers.txt`;
- созданные CSV-файлы;
- (опционально) описание архитектуры.

Это первая часть проекта.  
Следующие части будут посвящены обработке данных, моделированию стратегий и визуализации.
